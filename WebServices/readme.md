# Web Service

## News

Сервис для просмотра новостей, редактирования источников (добавления, удаления, изменения) 


# Architecture :

## REST

Для данного сервиса хорошо подходит REST архитектура, так как : 
 - добавление, изменения, редактирование источников новостей, а также сами новости (как ресурс), хорошо описываются моделью без состояний (Stateless)
   (серверу ничего не нужно знать о состоянии клиентов)
 - данные о источниках, а также новости (за прошлые даты (новости не могут добовляться задним числом) ) можно кэшировать (Cacheable)
 - достаточно использовать CRUD операции для "общения" с сервисом
 - управление ресурсами через представления ( достаточно передать представление (в данном сервисе не нужны "глаголы") ) 
 - самодостаточные сообщения

# API

## Ресурсы:
 - коллекция новостей
 - новость
 - коллекция источников
 - источник

## Запросы:

#### Получаем колекцию источников новостей пользователя (их не много, можно не использовать фильтры):
```
GET /sources/
```
#### Пример ответа сервера:
```
{ 
	"response" : [
					{ 
					 "source_id": "/sources/{id}" // id источнка в пользовательской коллекции
					 ,"source_global_url": " ... " // глобальный url источника (например tut.by)
					 ,"source_name": " ... "  // имя источника новостей (пример: СБ Беларусь сегодня :) ) 
					 ,"source_desc": " ... "  // краткое описание источника (новости спорта/политика/финансы и тд) может быть пустым (например СБ Беларусь сегодня - там есть все новости)
					 ,"source_lable": " ... " // url на картинку на сервере (может быть пустым)
					}
					,
					{
					 "source_id": "/sources/{id}"
					 ,"source_global_url":" ... "
					 ,"source_name": " ... "
					 ,"source_desc": " ... "
					 ,"source_lable": " ... "
					}
					,
					{...}
					, 
					...
	]
}
```
 
#### Получаем коллекцию новостей из всех пользовательских источников лимитированную (по умолчанию ) по дате новости ( не старше 2 дней), далее по дням, новости с датой sysdate - 1 day можно кэшировать:
```
GET /sources/news?start_dt=sysdate&end_dt=sysdate-2
```
#### Пример ответа сервера:
```
{ 
	"response" : [
					{ 
					  "news_id": "/sources/news/{news_is}"
					 ,"source_id": "/sources/{id}"
					 ,"source_name": " ... " // имя источника новостей (пример: СБ Беларусь сегодня :) )
					 ,"news_date_id": "{news_date_id}" // дата появления/обновления новости
					 ,"news_title": " ... " // заголовок/имя новости
					 ,"news_body_limited":" ...  " // 1 - 2 абзаца тела новости
					 ,"news_start_image":" ... " //url на картинку в заголовке на сервере (может быть пустым)
					}
					,
					{
					  "news_id": "/sources/news/{news_is}"
					 ,"source_id": "/sources/{id}"
					 ,"source_name": " ... "
					 ,"news_date_id": "{news_date_id}"
					 ,"news_title": " ... " 
					 ,"news_body_limited":" ...  " 
					 ,"news_start_image":" ... " 
					}
					,
					{...}
					, 
					...
	]
}
```
#### Получаем отдельную статью:
```
GET /sources/news/{news_id}?
```
#### Пример ответа сервера:

```

{ 
	"response" : 
					{ 
					  "news_id": "/sources/news/{news_is}"
					 ,"source_id": "/sources/{id}"
					 ,"source_name": " ... " // имя источника новостей (пример: СБ Беларусь сегодня :) )
					 ,"news_date_id": "{news_date_id}" // дата появления/обновления новости
					 ,"news_title": " ... " // заголовок/имя новости
					 ,"news_body_full":" ...  " // тело новости
					 ,"news_start_image":" ... " //url на картинку в заголовке новости
					 ,"news_body_images": [" ... " , " ... "] //массив url картинок, использованных в теле новости
					 ,"news_author":" ... " 
					 ,"news_tags":" ... "
					 
					}
	
}

```
 
#### Получаем отдельный источник новостей:
```
GET /sources/{id}
```
#### Пример ответа сервера:
```
{ 
	"response" : { 
					 "source_id": "/sources/{id}" // id источнка в пользовательской коллекции
					 ,"source_global_url": " ... " // глобальный url источника (например tut.by)
					 ,"source_name": " ... "  // имя источника новостей (пример: СБ Беларусь сегодня :) ) 
					 ,"source_desc": " ... "  // краткое описание источника (новости спорта/политика/финансы и тд) может быть пустым (например СБ Беларусь сегодня - там есть все новости)
					 ,"source_lable": " ... " // url на картинку на сервере (может быть пустым)
				}
}
```
 
#### Добовляем источник новостей (клиент предоставляет только url источника (предпологается, что клиент умеет добовлять источники(знает формат и урл и тд ...) и на сервер умеет получать новости по url(например tut.by) )):
Для id источника можно использовать хэш по url и соответственно клиент может посчитать его сам
```
PUT /sources/
```
#### Пример ответа сервера: 
```
HTTP/1.1 201 Created
    Date: ...
    Content-Length: ...  
    Content-Type: json;charset="utf-8"
    Location: /sources/{id}
	... 

{ 
	"response" : { 
					 "source_id": "/sources/{id}" // id источнка в пользовательской коллекции
					 ,"source_global_url": " ... " // глобальный url источника (например tut.by)
					 ,"source_name": " ... "  // имя источника новостей (пример: СБ Беларусь сегодня :) ) 
					 ,"source_desc": " ... "  // краткое описание источника (новости спорта/политика/финансы и тд) может быть пустым (например СБ Беларусь сегодня - там есть все новости)
					 ,"source_lable": " ... " // url на картинку на сервере (может быть пустым)
				}
}
```

#### Удаляем источник новостей: 
```
DELETE /sources/{id}
```



